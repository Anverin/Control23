<div class="container min-vh-100">

  <form class="order-form col-lg-6 mb-5 mx-auto" [formGroup]="orderForm" *ngIf="!isSuccess; else thanksBlock">
    <h2 class="text-center fw-bold p-5">Сделать заказ</h2>

    <label for="product" class="form-label">Товар</label>
    <input type="text" id="product" class="form-control fw-bold"
           formControlName="product">

    <label for="comment" class="form-label">Комментарий к заказу</label>
    <textarea id="comment" class="form-control"
              formControlName="comment"></textarea>

    <div class="row row-cols-1 row-cols-sm-1 row-cols-lg-3 mb-3">
      <div class="col-4">
        <label for="name" class="form-label">Имя</label>
        <input type="text" id="name" class="form-control"
               formControlName="name"
               pattern="[А-ЯЁа-яёA-Za-z]+"
               [class]="{'border-danger': name?.invalid && (name?.dirty || name?.touched)}">

        <div *ngIf="name?.invalid && (name?.dirty || name?.touched)">
          <div class="text-danger" *ngIf="name?.errors?.['required']">
            Имя обязательно
          </div>
          <div class="text-danger" *ngIf="name?.errors?.['pattern']">
            Имя должно содержать только буквы
          </div>
        </div>
      </div>

      <div class="col-4">
        <label for="last_name" class="form-label">Фамилия</label>
        <input type="text" id="last_name" class="form-control"
               formControlName="last_name"
               pattern="[А-ЯЁа-яёA-Za-z]+"
               [class]="{'border-danger': name?.invalid && (name?.dirty || name?.touched)}">

        <div *ngIf="last_name?.invalid && (last_name?.dirty || last_name?.touched)">
          <div class="text-danger" *ngIf="last_name?.errors?.['required']">
            Фамилия обязательна
          </div>
          <div class="text-danger" *ngIf="last_name?.errors?.['pattern']">
            Фамилия должна содержать только буквы
          </div>
        </div>
      </div>

      <div class="col-4">
        <label for="phone" class="form-label">Телефон</label>
        <input type="text" id="phone" class="form-control"
               formControlName="phone"
               pattern="^[+]{0,1}[0-9]{11}"
               [class]="{'border-danger': name?.invalid && (name?.dirty || name?.touched)}">

        <div *ngIf="phone?.invalid && (phone?.dirty || phone?.touched)">
          <div class="text-danger" *ngIf="phone?.errors?.['required']">
            Телефон обязателен
          </div>
          <div class="text-danger" *ngIf="phone?.errors?.['pattern']">
            Телефон должен содержать только 11 цифр и знак +
          </div>
        </div>
      </div>
    </div>

    <div class="row row-cols-1 row-cols-sm-1 row-cols-md-2 row-cols-lg-2 mb-3">
      <div class="col-6">
        <label for="country" class="form-label">Страна</label>
        <input type="text" id="country" class="form-control"
               formControlName="country"
               [class]="{'border-danger': country?.invalid && (country?.dirty || country?.touched)}">

        <div *ngIf="country?.invalid && (country?.dirty || country?.touched)">
          <div class="text-danger" *ngIf="country?.errors?.['required']">
            Страна обязательна
          </div>
        </div>
      </div>

      <div class="col-6">
        <label for="zip" class="form-label">Индекс</label>
        <input type="text" id="zip" class="form-control"
               formControlName="zip"
               [class]="{'border-danger': zip?.invalid && (zip?.dirty || zip?.touched)}">

        <div *ngIf="zip?.invalid && (zip?.dirty || zip?.touched)">
          <div class="text-danger" *ngIf="zip?.errors?.['required']">
            Индекс обязателен
          </div>
        </div>
      </div>
    </div>

    <label for="address" class="form-label">Адрес</label>
    <input type="text" id="address" class="form-control"
           formControlName="address"
           pattern="^[А-ЯЁа-яёA-Za-z0-9]+\s*[А-ЯЁа-яёA-Za-z0-9\s\-\/]*"
           [class]="{'border-danger': address?.invalid && (address?.dirty || address?.touched)}">

    <div *ngIf="address?.invalid && (address?.dirty || address?.touched)">
      <div class="text-danger" *ngIf="address?.errors?.['required']">
        Адрес обязателен
      </div>
      <div class="text-danger" *ngIf="address?.errors?.['pattern']">
        Адрес должен содержать только буквы, цифры, пробелы, дефис и слеш
      </div>
    </div>

    <button type="button" class="btn btn-primary px-5 mt-4 hvr-ripple-in" id="btn-order" [disabled]="orderForm.invalid" (click)="createOrder()">Отправить</button>

    <div class="order-error text-danger pt-2" *ngIf="isError">Произошла ошибка. Попробуйте еще раз.</div>
  </form>

</div>

<ng-template #thanksBlock>
    <div class="thanksBlock">
      <p class=" h5 bg-primary text-white fw-bold text-center rounded-3 p-5 m-5">Спасибо за заказ!</p>
    </div>
</ng-template>
